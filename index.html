<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Pattern Analyzer - 200 Trends</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #0a0a0a 0%, #1a1a2e 50%, #0a0a0a 100%);
            min-height: 100vh;
            color: #fff;
            padding: 10px;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
        }
        
        h1 {
            text-align: center;
            font-size: 24px;
            margin-bottom: 20px;
            background: linear-gradient(90deg, #ff6b6b, #4ecdc4, #45b7d1, #96ceb4);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 0 0 30px rgba(78, 205, 196, 0.3);
        }
        
        .input-section {
            background: linear-gradient(145deg, #1e1e2e, #2a2a3e);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            border: 1px solid #3a3a5a;
        }
        
        .input-row {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            justify-content: center;
            align-items: center;
        }
        
        .input-box {
            width: 80px;
            height: 50px;
            font-size: 24px;
            text-align: center;
            border: 2px solid #4ecdc4;
            border-radius: 10px;
            background: #0a0a1a;
            color: #fff;
            outline: none;
        }
        
        .input-box:focus {
            border-color: #ff6b6b;
            box-shadow: 0 0 15px rgba(255, 107, 107, 0.5);
        }
        
        .btn {
            padding: 12px 30px;
            font-size: 16px;
            font-weight: bold;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .btn-add {
            background: linear-gradient(135deg, #4ecdc4, #44a08d);
            color: #fff;
        }
        
        .btn-add:hover {
            transform: scale(1.05);
            box-shadow: 0 0 20px rgba(78, 205, 196, 0.5);
        }
        
        .btn-clear {
            background: linear-gradient(135deg, #ff6b6b, #ee5a5a);
            color: #fff;
        }
        
        .btn-clear:hover {
            transform: scale(1.05);
            box-shadow: 0 0 20px rgba(255, 107, 107, 0.5);
        }
        
        .btn-analyze {
            background: linear-gradient(135deg, #a855f7, #7c3aed);
            color: #fff;
            padding: 15px 40px;
            font-size: 18px;
        }
        
        .btn-analyze:hover {
            transform: scale(1.05);
            box-shadow: 0 0 25px rgba(168, 85, 247, 0.5);
        }
        
        .btn-undo {
            background: linear-gradient(135deg, #f59e0b, #d97706);
            color: #fff;
        }
        
        .btn-undo:hover {
            transform: scale(1.05);
            box-shadow: 0 0 20px rgba(245, 158, 11, 0.5);
        }
        
        .results-display {
            background: linear-gradient(145deg, #1e1e2e, #2a2a3e);
            border-radius: 15px;
            padding: 15px;
            margin-bottom: 20px;
            border: 1px solid #3a3a5a;
        }
        
        .results-title {
            font-size: 16px;
            margin-bottom: 10px;
            color: #4ecdc4;
        }
        
        .results-grid {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            max-height: 150px;
            overflow-y: auto;
        }
        
        .result-ball {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 16px;
            color: #fff;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
        }
        
        .ball-0 { background: linear-gradient(135deg, #9333ea, #7c3aed); }
        .ball-1 { background: linear-gradient(135deg, #22c55e, #16a34a); }
        .ball-2 { background: linear-gradient(135deg, #ef4444, #dc2626); }
        .ball-3 { background: linear-gradient(135deg, #22c55e, #16a34a); }
        .ball-4 { background: linear-gradient(135deg, #ef4444, #dc2626); }
        .ball-5 { background: linear-gradient(135deg, #9333ea, #7c3aed); }
        .ball-6 { background: linear-gradient(135deg, #ef4444, #dc2626); }
        .ball-7 { background: linear-gradient(135deg, #22c55e, #16a34a); }
        .ball-8 { background: linear-gradient(135deg, #ef4444, #dc2626); }
        .ball-9 { background: linear-gradient(135deg, #22c55e, #16a34a); }
        
        .prediction-section {
            background: linear-gradient(145deg, #1a1a2e, #252540);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            border: 2px solid #a855f7;
        }
        
        .prediction-title {
            font-size: 20px;
            color: #a855f7;
            margin-bottom: 15px;
            text-align: center;
        }
        
        .prediction-grid {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .prediction-item {
            background: linear-gradient(145deg, #2a2a3e, #3a3a4e);
            border-radius: 10px;
            padding: 15px;
            text-align: center;
            border: 1px solid #4a4a6a;
        }
        
        .prediction-number {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            margin: 0 auto 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            font-weight: bold;
        }
        
        .prediction-percent {
            font-size: 18px;
            font-weight: bold;
        }
        
        .percent-high { color: #22c55e; }
        .percent-medium { color: #f59e0b; }
        .percent-low { color: #ef4444; }
        
        .best-prediction {
            background: linear-gradient(145deg, #1e3a2e, #2a4a3e);
            border: 2px solid #22c55e;
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            margin-bottom: 20px;
        }
        
        .best-title {
            font-size: 16px;
            color: #4ecdc4;
            margin-bottom: 10px;
        }
        
        .best-numbers {
            display: flex;
            justify-content: center;
            gap: 15px;
            flex-wrap: wrap;
        }
        
        .best-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 5px;
        }
        
        .best-ball {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 28px;
            font-weight: bold;
            color: #fff;
            box-shadow: 0 0 20px rgba(34, 197, 94, 0.5);
        }
        
        .matched-patterns {
            background: linear-gradient(145deg, #1e1e2e, #2a2a3e);
            border-radius: 15px;
            padding: 20px;
            border: 1px solid #3a3a5a;
            margin-bottom: 20px;
        }
        
        .patterns-title {
            font-size: 18px;
            color: #f59e0b;
            margin-bottom: 15px;
        }
        
        .patterns-list {
            max-height: 400px;
            overflow-y: auto;
        }
        
        .pattern-item {
            background: linear-gradient(145deg, #252535, #353545);
            border-radius: 10px;
            padding: 12px;
            margin-bottom: 10px;
            border-left: 4px solid;
        }
        
        .pattern-high { border-color: #22c55e; }
        .pattern-medium { border-color: #f59e0b; }
        .pattern-low { border-color: #ef4444; }
        
        .pattern-name {
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .pattern-match {
            font-size: 14px;
            color: #888;
        }
        
        .pattern-next {
            font-size: 14px;
            color: #4ecdc4;
            margin-top: 5px;
        }
        
        .category-predictions {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .category-box {
            background: linear-gradient(145deg, #1e1e2e, #2a2a3e);
            border-radius: 10px;
            padding: 15px;
            text-align: center;
            border: 1px solid #3a3a5a;
        }
        
        .category-title {
            font-size: 14px;
            color: #888;
            margin-bottom: 10px;
        }
        
        .category-value {
            font-size: 24px;
            font-weight: bold;
        }
        
        .category-percent {
            font-size: 14px;
            margin-top: 5px;
        }
        
        .stats-section {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .stat-box {
            background: linear-gradient(145deg, #1e1e2e, #2a2a3e);
            border-radius: 10px;
            padding: 15px;
            text-align: center;
        }
        
        .stat-value {
            font-size: 24px;
            font-weight: bold;
            color: #4ecdc4;
        }
        
        .stat-label {
            font-size: 12px;
            color: #888;
            margin-top: 5px;
        }
        
        .quick-add {
            display: grid;
            grid-template-columns: repeat(10, 1fr);
            gap: 5px;
            margin-top: 15px;
        }
        
        .quick-btn {
            width: 100%;
            height: 45px;
            border-radius: 10px;
            border: none;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            color: #fff;
            transition: all 0.3s;
        }
        
        .quick-btn:hover {
            transform: scale(1.1);
        }
        
        .all-patterns-section {
            background: linear-gradient(145deg, #1e1e2e, #2a2a3e);
            border-radius: 15px;
            padding: 20px;
            border: 1px solid #3a3a5a;
            margin-top: 20px;
        }
        
        .all-patterns-title {
            font-size: 18px;
            color: #a855f7;
            margin-bottom: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .toggle-btn {
            background: #3a3a5a;
            border: none;
            color: #fff;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
        }
        
        .patterns-grid {
            display: none;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 10px;
            max-height: 500px;
            overflow-y: auto;
        }
        
        .patterns-grid.show {
            display: grid;
        }
        
        .mini-pattern {
            background: #252535;
            border-radius: 8px;
            padding: 10px;
            font-size: 12px;
        }
        
        .mini-pattern-name {
            color: #4ecdc4;
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .mini-pattern-seq {
            color: #888;
        }

        ::-webkit-scrollbar {
            width: 8px;
        }
        
        ::-webkit-scrollbar-track {
            background: #1a1a2e;
        }
        
        ::-webkit-scrollbar-thumb {
            background: #4a4a6a;
            border-radius: 4px;
        }
        
        @media (max-width: 768px) {
            .prediction-grid {
                grid-template-columns: repeat(5, 1fr);
            }
            
            .category-predictions {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .stats-section {
                grid-template-columns: repeat(2, 1fr);
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üéØ AI PATTERN ANALYZER - 200 TRENDS üéØ</h1>
        
        <div class="input-section">
            <div class="input-row">
                <input type="number" class="input-box" id="resultInput" min="0" max="9" placeholder="0-9">
                <button class="btn btn-add" onclick="addResult()">‚ûï ADD</button>
                <button class="btn btn-undo" onclick="undoLast()">‚Ü©Ô∏è UNDO</button>
                <button class="btn btn-clear" onclick="clearResults()">üóëÔ∏è CLEAR</button>
                <button class="btn btn-analyze" onclick="analyzePatterns()">üîç ANALYZE</button>
            </div>
            
            <div class="quick-add">
                <button class="quick-btn ball-0" onclick="quickAdd(0)">0</button>
                <button class="quick-btn ball-1" onclick="quickAdd(1)">1</button>
                <button class="quick-btn ball-2" onclick="quickAdd(2)">2</button>
                <button class="quick-btn ball-3" onclick="quickAdd(3)">3</button>
                <button class="quick-btn ball-4" onclick="quickAdd(4)">4</button>
                <button class="quick-btn ball-5" onclick="quickAdd(5)">5</button>
                <button class="quick-btn ball-6" onclick="quickAdd(6)">6</button>
                <button class="quick-btn ball-7" onclick="quickAdd(7)">7</button>
                <button class="quick-btn ball-8" onclick="quickAdd(8)">8</button>
                <button class="quick-btn ball-9" onclick="quickAdd(9)">9</button>
            </div>
        </div>
        
        <div class="results-display">
            <div class="results-title">üìä Recent Results (Total: <span id="totalCount">0</span>)</div>
            <div class="results-grid" id="resultsGrid"></div>
        </div>
        
        <div class="stats-section">
            <div class="stat-box">
                <div class="stat-value" id="statBig">0</div>
                <div class="stat-label">Big (6-9)</div>
            </div>
            <div class="stat-box">
                <div class="stat-value" id="statSmall">0</div>
                <div class="stat-label">Small (0-4)</div>
            </div>
            <div class="stat-box">
                <div class="stat-value" id="statRed">0</div>
                <div class="stat-label">Red (0,2,4,6,8)</div>
            </div>
            <div class="stat-box">
                <div class="stat-value" id="statGreen">0</div>
                <div class="stat-label">Green (1,3,5,7,9)</div>
            </div>
        </div>
        
        <div class="best-prediction" id="bestPrediction" style="display: none;">
            <div class="best-title">üéØ AI RECOMMENDED PREDICTIONS üéØ</div>
            <div class="best-numbers" id="bestNumbers"></div>
        </div>
        
        <div class="prediction-section" id="predictionSection" style="display: none;">
            <div class="prediction-title">üìà NUMBER PREDICTION PROBABILITIES</div>
            <div class="prediction-grid" id="predictionGrid"></div>
        </div>
        
        <div class="category-predictions" id="categoryPredictions" style="display: none;">
            <div class="category-box">
                <div class="category-title">SIZE PREDICTION</div>
                <div class="category-value" id="sizePrediction">-</div>
                <div class="category-percent" id="sizePercent">-</div>
            </div>
            <div class="category-box">
                <div class="category-title">COLOR PREDICTION</div>
                <div class="category-value" id="colorPrediction">-</div>
                <div class="category-percent" id="colorPercent">-</div>
            </div>
        </div>
        
        <div class="matched-patterns" id="matchedPatterns" style="display: none;">
            <div class="patterns-title">üî• MATCHED PATTERNS (Sorted by Match %)</div>
            <div class="patterns-list" id="patternsList"></div>
        </div>
        
        <div class="all-patterns-section">
            <div class="all-patterns-title">
                üìã ALL 200 PATTERNS
                <button class="toggle-btn" onclick="togglePatterns()">Show/Hide</button>
            </div>
            <div class="patterns-grid" id="allPatternsGrid"></div>
        </div>
    </div>

    <script>
        // All 200 Patterns Definition
        const ALL_PATTERNS = [
            { name: "Single Trend", sequence: [6,1,8,3,6,1], categories: ["RB","GS","RB","GS","RB","GS"] },
            { name: "Double Trend", sequence: [6,8,1,3,6,8,1,3], categories: ["RB","RB","GS","GS","RB","RB","GS","GS"] },
            { name: "Triple Trend", sequence: [6,8,6,1,3,1,6,8,6], categories: ["RB","RB","RB","GS","GS","GS","RB","RB","RB"] },
            { name: "Quadra Trend", sequence: [6,8,6,8,1,3,1,3], categories: ["RB","RB","RB","RB","GS","GS","GS","GS"] },
            { name: "Five One Trend", sequence: [6,8,6,8,6,1,8,6,8,6,8], categories: ["RB","RB","RB","RB","RB","GS","RB","RB","RB","RB","RB"] },
            { name: "Four One Trend", sequence: [2,4,2,4,7,2,4,2,4], categories: ["RS","RS","RS","RS","GB","RS","RS","RS","RS"] },
            { name: "Four Two Trend", sequence: [6,8,6,8,1,3,6,8,6,8], categories: ["RB","RB","RB","RB","GS","GS","RB","RB","RB","RB"] },
            { name: "Four Three Trend", sequence: [2,4,2,4,7,9,7,2,4,2,4], categories: ["RS","RS","RS","RS","GB","GB","GB","RS","RS","RS","RS"] },
            { name: "Two One Trend", sequence: [6,8,1,6,8,1,6,8,1], categories: ["RB","RB","GS","RB","RB","GS","RB","RB","GS"] },
            { name: "Three One Trend", sequence: [2,4,2,7,2,4,2,7], categories: ["RS","RS","RS","GB","RS","RS","RS","GB"] },
            { name: "Three Two Trend", sequence: [6,8,6,1,3,6,8,6,1,3], categories: ["RB","RB","RB","GS","GS","RB","RB","RB","GS","GS"] },
            { name: "Long Trend Red Big", sequence: [6,8,6,8,6,8,6,8,6,8], categories: ["RB","RB","RB","RB","RB","RB","RB","RB","RB","RB"] },
            { name: "Long Trend Green Small", sequence: [1,3,1,3,1,3,1,3,1,3], categories: ["GS","GS","GS","GS","GS","GS","GS","GS","GS","GS"] },
            { name: "Single Trend Reverse", sequence: [7,2,9,4,7,2], categories: ["GB","RS","GB","RS","GB","RS"] },
            { name: "Double Trend Reverse", sequence: [7,9,2,4,7,9,2,4], categories: ["GB","GB","RS","RS","GB","GB","RS","RS"] },
            { name: "Triple Trend Reverse", sequence: [7,9,7,2,4,2,7,9,7], categories: ["GB","GB","GB","RS","RS","RS","GB","GB","GB"] },
            { name: "Quadra Trend Reverse", sequence: [7,9,7,9,2,4,2,4], categories: ["GB","GB","GB","GB","RS","RS","RS","RS"] },
            { name: "Three In One Trend", sequence: [7,9,7,2,7,9,7], categories: ["GB","GB","GB","RS","GB","GB","GB"] },
            { name: "Two In One Trend", sequence: [2,4,7,2,4,7,2,4], categories: ["RS","RS","GB","RS","RS","GB","RS","RS"] },
            { name: "Three In Two Trend", sequence: [7,9,7,2,4,7,9,7], categories: ["GB","GB","GB","RS","RS","GB","GB","GB"] },
            { name: "Four In One Trend", sequence: [2,4,2,4,7,2,4,2,4], categories: ["RS","RS","RS","RS","GB","RS","RS","RS","RS"] },
            { name: "Four In Two Trend", sequence: [7,9,7,9,2,4,7,9,7,9], categories: ["GB","GB","GB","GB","RS","RS","GB","GB","GB","GB"] },
            { name: "Long Trend Green Big", sequence: [7,9,7,9,7,9,7,9,7,9], categories: ["GB","GB","GB","GB","GB","GB","GB","GB","GB","GB"] },
            { name: "Long Trend Red Small", sequence: [2,4,2,4,2,4,2,4,2,4], categories: ["RS","RS","RS","RS","RS","RS","RS","RS","RS","RS"] },
            { name: "Micro Wave Trend", sequence: [2,7,4,2,9,4], categories: ["RS","GB","RS","RS","GB","RS"] },
            { name: "Tsunami Wave Trend", sequence: [7,9,7,2,4,9,7,9,7,2], categories: ["GB","GB","GB","RS","RS","GB","GB","GB","GB","RS"] },
            { name: "Reverse Tsunami Trend", sequence: [2,4,2,7,9,2,4,2,4,7], categories: ["RS","RS","RS","GB","GB","RS","RS","RS","RS","GB"] },
            { name: "Pulse Wave Trend", sequence: [1,6,3,7,2,1,8], categories: ["GS","RB","GS","GB","RS","GS","RB"] },
            { name: "Echo Wave Trend", sequence: [6,1,3,8,1,3,6], categories: ["RB","GS","GS","RB","GS","GS","RB"] },
            { name: "Sharp Zigzag Trend", sequence: [7,2,6,1,9,4,8,3], categories: ["GB","RS","RB","GS","GB","RS","RB","GS"] },
            { name: "Soft Zigzag Trend", sequence: [2,1,4,3,2,1], categories: ["RS","GS","RS","GS","RS","GS"] },
            { name: "Double Zigzag Trend", sequence: [7,9,2,4,7,9,2,4], categories: ["GB","GB","RS","RS","GB","GB","RS","RS"] },
            { name: "Cross Zigzag Trend", sequence: [6,7,2,1,8,9], categories: ["RB","GB","RS","GS","RB","GB"] },
            { name: "Inverse Zigzag Trend", sequence: [1,6,7,2,3,8,9,4], categories: ["GS","RB","GB","RS","GS","RB","GB","RS"] },
            { name: "Ascending Pyramid Trend", sequence: [2,7,9,7,9,7], categories: ["RS","GB","GB","GB","GB","GB"] },
            { name: "Descending Pyramid Trend", sequence: [9,7,9,7,2,4], categories: ["GB","GB","GB","GB","RS","RS"] },
            { name: "Double Pyramid Trend", sequence: [2,7,9,7,4,2,9,7,9,2], categories: ["RS","GB","GB","GB","RS","RS","GB","GB","GB","RS"] },
            { name: "Inverted Pyramid Trend", sequence: [7,9,7,2,4,2,4,2], categories: ["GB","GB","GB","RS","RS","RS","RS","RS"] },
            { name: "Step Pyramid Trend", sequence: [2,7,4,7,9,2,7,9,7], categories: ["RS","GB","RS","GB","GB","RS","GB","GB","GB"] },
            { name: "Inner Spiral Trend", sequence: [7,2,1,6,9,4,3], categories: ["GB","RS","GS","RB","GB","RS","GS"] },
            { name: "Outer Spiral Trend", sequence: [6,1,2,7,8,3,4,9], categories: ["RB","GS","RS","GB","RB","GS","RS","GB"] },
            { name: "Double Spiral Trend", sequence: [7,9,2,1,6,8,7,9], categories: ["GB","GB","RS","GS","RB","RB","GB","GB"] },
            { name: "Reverse Spiral Trend", sequence: [2,7,6,1,4,9,8], categories: ["RS","GB","RB","GS","RS","GB","RB"] },
            { name: "Infinity Spiral Trend", sequence: [7,2,4,9,7,2,4,9], categories: ["GB","RS","RS","GB","GB","RS","RS","GB"] },
            { name: "Full Diamond Trend", sequence: [2,7,9,7,2,4,2,7], categories: ["RS","GB","GB","GB","RS","RS","RS","GB"] },
            { name: "Half Diamond Trend", sequence: [7,9,7,2,4], categories: ["GB","GB","GB","RS","RS"] },
            { name: "Broken Diamond Trend", sequence: [2,7,4,7,9,2,7,4], categories: ["RS","GB","RS","GB","GB","RS","GB","RS"] },
            { name: "Double Diamond Trend", sequence: [7,9,2,7,9,4,2,7,9], categories: ["GB","GB","RS","GB","GB","RS","RS","GB","GB"] },
            { name: "Crystal Diamond Trend", sequence: [2,4,7,9,7,9,2,4], categories: ["RS","RS","GB","GB","GB","GB","RS","RS"] },
            { name: "Chaos Fusion Trend", sequence: [7,6,1,2,9,8,3,4], categories: ["GB","RB","GS","RS","GB","RB","GS","RS"] },
            { name: "Order Fusion Trend", sequence: [2,4,1,3,6,8,7,9], categories: ["RS","RS","GS","GS","RB","RB","GB","GB"] },
            { name: "Mixed Fusion Trend", sequence: [7,2,6,1,9,4], categories: ["GB","RS","RB","GS","GB","RS"] },
            { name: "Quantum Fusion Trend", sequence: [6,7,2,1,8,9,4,3], categories: ["RB","GB","RS","GS","RB","GB","RS","GS"] },
            { name: "Parallel Fusion Trend", sequence: [7,1,6,2,9,3,8,4], categories: ["GB","GS","RB","RS","GB","GS","RB","RS"] },
            { name: "Mega Surge Trend", sequence: [7,9,7,9,7,2,9,7,9,7], categories: ["GB","GB","GB","GB","GB","RS","GB","GB","GB","GB"] },
            { name: "Mega Crash Trend", sequence: [2,4,2,4,2,7,4,2,4,2], categories: ["RS","RS","RS","RS","RS","GB","RS","RS","RS","RS"] },
            { name: "Flash Trend", sequence: [7,2,9,4,7,2,9], categories: ["GB","RS","GB","RS","GB","RS","GB"] },
            { name: "Thunder Trend", sequence: [6,8,6,1,3,6,8,6], categories: ["RB","RB","RB","GS","GS","RB","RB","RB"] },
            { name: "Storm Trend", sequence: [7,2,4,9,2,4,7,2], categories: ["GB","RS","RS","GB","RS","RS","GB","RS"] },
            { name: "Red Violet Entry Trend", sequence: [0,7,9,2,7], categories: ["RV","GB","GB","RS","GB"] },
            { name: "Green Violet Entry Trend", sequence: [5,2,4,7,2], categories: ["GV","RS","RS","GB","RS"] },
            { name: "Double Violet Trend", sequence: [0,7,9,5,2,4], categories: ["RV","GB","GB","GV","RS","RS"] },
            { name: "Violet Sandwich Trend", sequence: [7,0,9,5,2], categories: ["GB","RV","GB","GV","RS"] },
            { name: "Triple Violet Trend", sequence: [0,7,5,2,0,9], categories: ["RV","GB","GV","RS","RV","GB"] },
            { name: "Fibonacci Trend", sequence: [7,9,2,7,4,9,7,2], categories: ["GB","GB","RS","GB","RS","GB","GB","RS"] },
            { name: "Prime Trend", sequence: [2,7,9,4,7,2,9], categories: ["RS","GB","GB","RS","GB","RS","GB"] },
            { name: "Golden Ratio Trend", sequence: [7,9,7,2,4,7,9,2], categories: ["GB","GB","GB","RS","RS","GB","GB","RS"] },
            { name: "Binary Trend", sequence: [7,2,4,9,2,7,9,4], categories: ["GB","RS","RS","GB","RS","GB","GB","RS"] },
            { name: "Hexagonal Trend", sequence: [2,7,9,4,7,9,2], categories: ["RS","GB","GB","RS","GB","GB","RS"] },
            { name: "Neural Network Trend", sequence: [7,2,1,6,9,4,3,8,7], categories: ["GB","RS","GS","RB","GB","RS","GS","RB","GB"] },
            { name: "AI Prediction Trend", sequence: [2,4,7,9,7,2,9,7], categories: ["RS","RS","GB","GB","GB","RS","GB","GB"] },
            { name: "Machine Learning Trend", sequence: [7,9,2,7,4,2,9,7,4], categories: ["GB","GB","RS","GB","RS","RS","GB","GB","RS"] },
            { name: "Deep Learning Trend", sequence: [6,1,2,7,8,3,4,9,6], categories: ["RB","GS","RS","GB","RB","GS","RS","GB","RB"] },
            { name: "Quantum Algorithm Trend", sequence: [7,2,9,7,4,2,9,4,7,9], categories: ["GB","RS","GB","GB","RS","RS","GB","RS","GB","GB"] },
            { name: "Phoenix Rising Trend", sequence: [2,4,2,4,7,9,7,9,7,9], categories: ["RS","RS","RS","RS","GB","GB","GB","GB","GB","GB"] },
            { name: "Dragon Tail Trend", sequence: [7,9,7,9,2,7,4,9,2], categories: ["GB","GB","GB","GB","RS","GB","RS","GB","RS"] },
            { name: "Butterfly Effect Trend", sequence: [2,7,9,4,2,7,9,4], categories: ["RS","GB","GB","RS","RS","GB","GB","RS"] },
            { name: "Black Hole Trend", sequence: [7,9,7,2,4,2,4,2], categories: ["GB","GB","GB","RS","RS","RS","RS","RS"] },
            { name: "Supernova Trend", sequence: [2,7,9,7,9,7,2,4], categories: ["RS","GB","GB","GB","GB","GB","RS","RS"] },
            { name: "Parallel Line 1 Trend", sequence: [7,2], categories: ["GB","RS"] },
            { name: "Parallel Line 2 Trend", sequence: [6,1,7], categories: ["RB","GS","GB"] },
            { name: "Parallel Line 3 Trend", sequence: [7,1,6], categories: ["GB","GS","RB"] },
            { name: "Parallel Line 4 Trend", sequence: [2,1,6,2], categories: ["RS","GS","RB","RS"] },
            { name: "Parallel Line 5 Trend", sequence: [7,9,2], categories: ["GB","GB","RS"] },
            { name: "Parallel Line 6 Trend", sequence: [6,8,1,7,1], categories: ["RB","RB","GS","GB","GS"] },
            { name: "Parallel Line 7 Trend", sequence: [7,2,9,1], categories: ["GB","RS","GB","GS"] },
            { name: "Parallel Line 8 Trend", sequence: [6,1,2,7], categories: ["RB","GS","RS","GB"] },
            { name: "Parallel Line 9 Trend", sequence: [7,1,6,2,4], categories: ["GB","GS","RB","RS","RS"] },
            { name: "Parallel Line 10 Trend", sequence: [6,2,7,1], categories: ["RB","RS","GB","GS"] },
            { name: "Parallel Line 11 Trend", sequence: [7,9,2,6,1], categories: ["GB","GB","RS","RB","GS"] },
            { name: "Parallel Line 12 Trend", sequence: [6,7,1,8,2], categories: ["RB","GB","GS","RB","RS"] },
            { name: "Parallel Line 13 Trend", sequence: [7,2,1,4,3,9], categories: ["GB","RS","GS","RS","GS","GB"] },
            { name: "Parallel Line 14 Trend", sequence: [6,2,1,7,3,8], categories: ["RB","RS","GS","GB","GS","RB"] },
            { name: "Parallel Line 15 Trend", sequence: [7,1,6,2,8,9,4], categories: ["GB","GS","RB","RS","RB","GB","RS"] },
            { name: "Diagonal Line 1 Trend", sequence: [7,2], categories: ["GB","RS"] },
            { name: "Diagonal Line 2 Trend", sequence: [6,1,8], categories: ["RB","GS","RB"] },
            { name: "Diagonal Line 3 Trend", sequence: [1,6,7,2], categories: ["GS","RB","GB","RS"] },
            { name: "Diagonal Line 4 Trend", sequence: [2,7,6,1,8], categories: ["RS","GB","RB","GS","RB"] },
            { name: "Diagonal Line 5 Trend", sequence: [7,1,2,9], categories: ["GB","GS","RS","GB"] },
            { name: "Diagonal Line 6 Trend", sequence: [6,1,8,2,7], categories: ["RB","GS","RB","RS","GB"] },
            { name: "Cyclic Phase 1 Trend", sequence: [7,2], categories: ["GB","RS"] },
            { name: "Cyclic Phase 2 Trend", sequence: [6,1,8], categories: ["RB","GS","RB"] },
            { name: "Cyclic Phase 3 Trend", sequence: [7,1,2], categories: ["GB","GS","RS"] },
            { name: "Cyclic Phase 4 Trend", sequence: [2,7,6], categories: ["RS","GB","RB"] },
            { name: "Cyclic Expansion 1 Trend", sequence: [7,2,9,4], categories: ["GB","RS","GB","RS"] },
            { name: "Cyclic Expansion 2 Trend", sequence: [6,8,1], categories: ["RB","RB","GS"] },
            { name: "Cyclic Expansion 3 Trend", sequence: [1,3,6,7], categories: ["GS","GS","RB","GB"] },
            { name: "Cyclic Expansion 4 Trend", sequence: [6,1,2,7], categories: ["RB","GS","RS","GB"] },
            { name: "Cyclic Contraction 1 Trend", sequence: [7,2,1,6], categories: ["GB","RS","GS","RB"] },
            { name: "Cyclic Contraction 2 Trend", sequence: [6,7,2], categories: ["RB","GB","RS"] },
            { name: "Cyclic Contraction 3 Trend", sequence: [1,6,7,2,3], categories: ["GS","RB","GB","RS","GS"] },
            { name: "Cyclic Contraction 4 Trend", sequence: [2,7,6,1], categories: ["RS","GB","RB","GS"] },
            { name: "Cyclic Reset 1 Trend", sequence: [7,6,1], categories: ["GB","RB","GS"] },
            { name: "Cyclic Reset 2 Trend", sequence: [2,7,4,1], categories: ["RS","GB","RS","GS"] },
            { name: "Cyclic Reset 3 Trend", sequence: [7,2,1,6,9], categories: ["GB","RS","GS","RB","GB"] },
            { name: "Opposite Line 1 Trend", sequence: [7,2], categories: ["GB","RS"] },
            { name: "Opposite Line 2 Trend", sequence: [2,7,6], categories: ["RS","GB","RB"] },
            { name: "Opposite Line 3 Trend", sequence: [1,7,2,6], categories: ["GS","GB","RS","RB"] },
            { name: "Opposite Line 4 Trend", sequence: [6,2,1,7], categories: ["RB","RS","GS","GB"] },
            { name: "Opposite Line 5 Trend", sequence: [7,1,2], categories: ["GB","GS","RS"] },
            { name: "Cleaned Sequence 1 Trend", sequence: [7,9,2], categories: ["GB","GB","RS"] },
            { name: "Cleaned Sequence 2 Trend", sequence: [2,7,1,6], categories: ["RS","GB","GS","RB"] },
            { name: "Cleaned Sequence 3 Trend", sequence: [7,2,6,1,8], categories: ["GB","RS","RB","GS","RB"] },
            { name: "Cleaned Sequence 4 Trend", sequence: [2,4,7,9,2], categories: ["RS","RS","GB","GB","RS"] },
            { name: "Cleaned Sequence 5 Trend", sequence: [1,7,6,1,3], categories: ["GS","GB","RB","GS","GS"] },
            { name: "Cleaned Sequence 6 Trend", sequence: [6,7,8,2,1,9], categories: ["RB","GB","RB","RS","GS","GB"] },
            { name: "Cleaned Sequence 7 Trend", sequence: [7,9,1,6,8,2], categories: ["GB","GB","GS","RB","RB","RS"] },
            { name: "Cleaned Sequence 8 Trend", sequence: [2,1,7,6,4,9], categories: ["RS","GS","GB","RB","RS","GB"] },
            { name: "Cleaned Sequence 9 Trend", sequence: [1,6,7,9,2,4], categories: ["GS","RB","GB","GB","RS","RS"] },
            { name: "Cleaned Sequence 10 Trend", sequence: [6,2,7,1,9,4], categories: ["RB","RS","GB","GS","GB","RS"] },
            { name: "Cleaned Sequence 11 Trend", sequence: [7,6,8,1,3,2], categories: ["GB","RB","RB","GS","GS","RS"] },
            { name: "Cleaned Sequence 12 Trend", sequence: [2,7,9,7,6,4], categories: ["RS","GB","GB","GB","RB","RS"] },
            { name: "Cleaned Sequence 13 Trend", sequence: [7,6,1,9,2,4], categories: ["GB","RB","GS","GB","RS","RS"] },
            { name: "Cleaned Sequence 14 Trend", sequence: [6,1,7,9,8,3], categories: ["RB","GS","GB","GB","RB","GS"] },
            { name: "Cleaned Sequence 15 Trend", sequence: [7,2,1,6,9,4], categories: ["GB","RS","GS","RB","GB","RS"] },
            { name: "Opposite Cleaned 1 Trend", sequence: [2,4,7], categories: ["RS","RS","GB"] },
            { name: "Opposite Cleaned 2 Trend", sequence: [7,2,6,1], categories: ["GB","RS","RB","GS"] },
            { name: "Opposite Cleaned 3 Trend", sequence: [2,7,1,6,1], categories: ["RS","GB","GS","RB","GS"] },
            { name: "Opposite Cleaned 4 Trend", sequence: [7,9,2,4,7], categories: ["GB","GB","RS","RS","GB"] },
            { name: "Opposite Cleaned 5 Trend", sequence: [6,2,1,6,8], categories: ["RB","RS","GS","RB","RB"] },
            { name: "Opposite Cleaned 6 Trend", sequence: [1,2,1,7,6,4], categories: ["GS","RS","GS","GB","RB","RS"] },
            { name: "Opposite Cleaned 7 Trend", sequence: [2,4,6,1,3,7], categories: ["RS","RS","RB","GS","GS","GB"] },
            { name: "Opposite Cleaned 8 Trend", sequence: [7,6,2,1,9,4], categories: ["GB","RB","RS","GS","GB","RS"] },
            { name: "Opposite Cleaned 9 Trend", sequence: [6,1,2,4,7,9], categories: ["RB","GS","RS","RS","GB","GB"] },
            { name: "Opposite Cleaned 10 Trend", sequence: [1,7,2,6,4,9], categories: ["GS","GB","RS","RB","RS","GB"] },
            { name: "Opposite Cleaned 11 Trend", sequence: [2,1,3,6,8,7], categories: ["RS","GS","GS","RB","RB","GB"] },
            { name: "Opposite Cleaned 12 Trend", sequence: [7,2,4,2,1,9], categories: ["GB","RS","RS","RS","GS","GB"] },
            { name: "Opposite Cleaned 13 Trend", sequence: [2,1,6,4,7,9], categories: ["RS","GS","RB","RS","GB","GB"] },
            { name: "Opposite Cleaned 14 Trend", sequence: [1,6,2,4,3,8], categories: ["GS","RB","RS","RS","GS","RB"] },
            { name: "Opposite Cleaned 15 Trend", sequence: [2,7,6,1,4,9], categories: ["RS","GB","RB","GS","RS","GB"] },
            { name: "Wave Pattern A Trend", sequence: [7,9,2,7,9,4], categories: ["GB","GB","RS","GB","GB","RS"] },
            { name: "Wave Pattern B Trend", sequence: [2,4,7,2,4,9], categories: ["RS","RS","GB","RS","RS","GB"] },
            { name: "Wave Pattern C Trend", sequence: [7,2,9,4,7,2], categories: ["GB","RS","GB","RS","GB","RS"] },
            { name: "Wave Pattern D Trend", sequence: [2,7,4,9,2,7], categories: ["RS","GB","RS","GB","RS","GB"] },
            { name: "Staircase Up Trend", sequence: [2,7,9,7,9,7,9], categories: ["RS","GB","GB","GB","GB","GB","GB"] },
            { name: "Staircase Down Trend", sequence: [7,2,4,2,4,2,4], categories: ["GB","RS","RS","RS","RS","RS","RS"] },
            { name: "Bounce Pattern Trend", sequence: [2,4,7,9,2,4,7,9], categories: ["RS","RS","GB","GB","RS","RS","GB","GB"] },
            { name: "Reverse Bounce Trend", sequence: [7,9,2,4,7,9,2,4], categories: ["GB","GB","RS","RS","GB","GB","RS","RS"] },
            { name: "Snake Pattern Trend", sequence: [7,2,4,9,7,2,4,9], categories: ["GB","RS","RS","GB","GB","RS","RS","GB"] },
            { name: "Ladder Up Trend", sequence: [2,7,4,9,2,7,4,9], categories: ["RS","GB","RS","GB","RS","GB","RS","GB"] },
            { name: "Ladder Down Trend", sequence: [7,2,9,4,7,2,9,4], categories: ["GB","RS","GB","RS","GB","RS","GB","RS"] },
            { name: "Mirror Pattern Trend", sequence: [7,9,2,4,2,4,7,9], categories: ["GB","GB","RS","RS","RS","RS","GB","GB"] },
            { name: "Reverse Mirror Trend", sequence: [2,4,7,9,7,9,2,4], categories: ["RS","RS","GB","GB","GB","GB","RS","RS"] },
            { name: "Heart Pattern Trend", sequence: [7,9,7,2,7,9,7], categories: ["GB","GB","GB","RS","GB","GB","GB"] },
            { name: "Broken Heart Trend", sequence: [2,4,2,7,2,4,2], categories: ["RS","RS","RS","GB","RS","RS","RS"] },
            { name: "Crown Pattern Trend", sequence: [7,2,9,7,9,4,7], categories: ["GB","RS","GB","GB","GB","RS","GB"] },
            { name: "Shield Pattern Trend", sequence: [2,7,4,2,4,9,2], categories: ["RS","GB","RS","RS","RS","GB","RS"] },
            { name: "Arrow Up Trend", sequence: [2,4,7,9,7,9,7], categories: ["RS","RS","GB","GB","GB","GB","GB"] },
            { name: "Arrow Down Trend", sequence: [7,9,2,4,2,4,2], categories: ["GB","GB","RS","RS","RS","RS","RS"] },
            { name: "Cross Pattern Trend", sequence: [7,2,9,4,7], categories: ["GB","RS","GB","RS","GB"] },
            { name: "Plus Pattern Trend", sequence: [2,7,9,7,2], categories: ["RS","GB","GB","GB","RS"] },
            { name: "Minus Pattern Trend", sequence: [7,2,4,2,9], categories: ["GB","RS","RS","RS","GB"] },
            { name: "Equal Pattern Trend", sequence: [7,9,2,4,7,9], categories: ["GB","GB","RS","RS","GB","GB"] },
            { name: "Not Equal Trend", sequence: [2,4,7,9,2,4], categories: ["RS","RS","GB","GB","RS","RS"] },
            { name: "Greater Than Trend", sequence: [7,9,7,2,4,2], categories: ["GB","GB","GB","RS","RS","RS"] },
            { name: "Less Than Trend", sequence: [2,4,2,7,9,7], categories: ["RS","RS","RS","GB","GB","GB"] },
            { name: "Infinity Loop Trend", sequence: [7,2,9,4,2,7,4,9], categories: ["GB","RS","GB","RS","RS","GB","RS","GB"] },
            { name: "Double Infinity Trend", sequence: [2,7,4,9,7,2,9,4], categories: ["RS","GB","RS","GB","GB","RS","GB","RS"] },
            { name: "Triple Stack Trend", sequence: [7,9,7,2,4,2,7,9,7], categories: ["GB","GB","GB","RS","RS","RS","GB","GB","GB"] },
            { name: "Quad Stack Trend", sequence: [2,4,2,4,7,9,7,9], categories: ["RS","RS","RS","RS","GB","GB","GB","GB"] },
            { name: "Penta Stack Trend", sequence: [7,9,7,9,7,2,4,2,4,2], categories: ["GB","GB","GB","GB","GB","RS","RS","RS","RS","RS"] },
            { name: "Hexa Stack Trend", sequence: [2,4,2,7,9,7,2,4,2], categories: ["RS","RS","RS","GB","GB","GB","RS","RS","RS"] },
            { name: "Octa Stack Trend", sequence: [7,9,2,4,7,9,2,4], categories: ["GB","GB","RS","RS","GB","GB","RS","RS"] },
            { name: "Deca Stack Trend", sequence: [2,7,4,9,2,7,4,9,2,7], categories: ["RS","GB","RS","GB","RS","GB","RS","GB","RS","GB"] },
            { name: "Zig Pattern Trend", sequence: [7,2,4,9,2,4,7], categories: ["GB","RS","RS","GB","RS","RS","GB"] },
            { name: "Zag Pattern Trend", sequence: [2,7,9,4,7,9,2], categories: ["RS","GB","GB","RS","GB","GB","RS"] },
            { name: "Peak Valley Trend", sequence: [7,9,7,2,4,2,7,9], categories: ["GB","GB","GB","RS","RS","RS","GB","GB"] },
            { name: "Valley Peak Trend", sequence: [2,4,2,7,9,7,2,4], categories: ["RS","RS","RS","GB","GB","GB","RS","RS"] },
            { name: "Mountain Trend", sequence: [2,7,9,7,9,7,2], categories: ["RS","GB","GB","GB","GB","GB","RS"] },
            { name: "Valley Trend", sequence: [7,2,4,2,4,2,9], categories: ["GB","RS","RS","RS","RS","RS","GB"] },
            { name: "Plateau Trend", sequence: [7,9,7,9,7,9,2], categories: ["GB","GB","GB","GB","GB","GB","RS"] },
            { name: "Cliff Trend", sequence: [2,4,2,4,2,4,7], categories: ["RS","RS","RS","RS","RS","RS","GB"] },
            { name: "Bridge Trend", sequence: [7,2,4,2,4,9], categories: ["GB","RS","RS","RS","RS","GB"] },
            { name: "Tunnel Trend", sequence: [2,7,9,7,9,4], categories: ["RS","GB","GB","GB","GB","RS"] },
            { name: "Dome Trend", sequence: [2,7,9,7,4], categories: ["RS","GB","GB","GB","RS"] },
            { name: "Cave Trend", sequence: [7,2,4,2,9], categories: ["GB","RS","RS","RS","GB"] },
            { name: "Spike Up Trend", sequence: [2,4,7,2,4], categories: ["RS","RS","GB","RS","RS"] },
            { name: "Spike Down Trend", sequence: [7,9,2,7,9], categories: ["GB","GB","RS","GB","GB"] },
            { name: "Double Spike Up Trend", sequence: [2,7,4,9,2], categories: ["RS","GB","RS","GB","RS"] },
            { name: "Double Spike Down Trend", sequence: [7,2,9,4,7], categories: ["GB","RS","GB","RS","GB"] }
        ];

        let results = [];
        
        // Category mapping
        function getCategory(num) {
            if (num === 0) return "RV"; // Red Violet
            if (num === 5) return "GV"; // Green Violet
            if (num === 1 || num === 3) return "GS"; // Green Small
            if (num === 2 || num === 4) return "RS"; // Red Small
            if (num === 6 || num === 8) return "RB"; // Red Big
            if (num === 7 || num === 9) return "GB"; // Green Big
            return "";
        }
        
        function getCategoryNumbers(cat) {
            switch(cat) {
                case "RV": return [0];
                case "GV": return [5];
                case "GS": return [1, 3];
                case "RS": return [2, 4];
                case "RB": return [6, 8];
                case "GB": return [7, 9];
                default: return [];
            }
        }
        
        function addResult() {
            const input = document.getElementById('resultInput');
            const value = parseInt(input.value);
            
            if (isNaN(value) || value < 0 || value > 9) {
                alert('Please enter a number between 0-9');
                return;
            }
            
            results.push(value);
            input.value = '';
            updateDisplay();
            analyzePatterns();
        }
        
        function quickAdd(num) {
            results.push(num);
            updateDisplay();
            analyzePatterns();
        }
        
        function undoLast() {
            if (results.length > 0) {
                results.pop();
                updateDisplay();
                if (results.length >= 2) {
                    analyzePatterns();
                } else {
                    hideAnalysis();
                }
            }
        }
        
        function clearResults() {
            results = [];
            updateDisplay();
            hideAnalysis();
        }
        
        function hideAnalysis() {
            document.getElementById('bestPrediction').style.display = 'none';
            document.getElementById('predictionSection').style.display = 'none';
            document.getElementById('categoryPredictions').style.display = 'none';
            document.getElementById('matchedPatterns').style.display = 'none';
        }
        
        function updateDisplay() {
            const grid = document.getElementById('resultsGrid');
            grid.innerHTML = '';
            
            results.forEach((num, idx) => {
                const ball = document.createElement('div');
                ball.className = `result-ball ball-${num}`;
                ball.textContent = num;
                ball.title = `Position ${idx + 1}`;
                grid.appendChild(ball);
            });
            
            document.getElementById('totalCount').textContent = results.length;
            updateStats();
        }
        
        function updateStats() {
            let big = 0, small = 0, red = 0, green = 0;
            
            results.forEach(num => {
                if (num >= 5) big++;
                else small++;
                
                if (num % 2 === 0) red++;
                else green++;
            });
            
            document.getElementById('statBig').textContent = big;
            document.getElementById('statSmall').textContent = small;
            document.getElementById('statRed').textContent = red;
            document.getElementById('statGreen').textContent = green;
        }
        
        function analyzePatterns() {
            if (results.length < 2) {
                alert('Add at least 2 results to analyze');
                return;
            }
            
            const resultCategories = results.map(r => getCategory(r));
            const matchedPatterns = [];
            
            // Analyze each pattern
            ALL_PATTERNS.forEach((pattern, idx) => {
                const patternCats = pattern.categories;
                const patternLen = patternCats.length;
                
                // Check different window sizes
                for (let windowSize = Math.min(2, patternLen); windowSize <= Math.min(resultCategories.length, patternLen); windowSize++) {
                    const recentCats = resultCategories.slice(-windowSize);
                    
                    // Check if recent results match the beginning of pattern
                    let matchCount = 0;
                    for (let i = 0; i < windowSize; i++) {
                        if (i < patternCats.length && recentCats[i] === patternCats[i]) {
                            matchCount++;
                        }
                    }
                    
                    // Also check if recent results match any position in the pattern
                    let bestPositionMatch = 0;
                    let bestPosition = 0;
                    
                    for (let startPos = 0; startPos <= patternLen - windowSize; startPos++) {
                        let posMatch = 0;
                        for (let i = 0; i < windowSize; i++) {
                            if (recentCats[i] === patternCats[startPos + i]) {
                                posMatch++;
                            }
                        }
                        if (posMatch > bestPositionMatch) {
                            bestPositionMatch = posMatch;
                            bestPosition = startPos;
                        }
                    }
                    
                    const matchPercent = (bestPositionMatch / windowSize) * 100;
                    
                    if (matchPercent >= 50 && bestPositionMatch >= 2) {
                        // Get next predicted category
                        const nextPosition = bestPosition + windowSize;
                        let nextCategory = null;
                        
                        if (nextPosition < patternLen) {
                            nextCategory = patternCats[nextPosition];
                        } else if (patternLen > 0) {
                            // Pattern repeats
                            nextCategory = patternCats[nextPosition % patternLen];
                        }
                        
                        matchedPatterns.push({
                            name: pattern.name,
                            index: idx + 1,
                            matchPercent: matchPercent,
                            matchCount: bestPositionMatch,
                            windowSize: windowSize,
                            nextCategory: nextCategory,
                            nextNumbers: getCategoryNumbers(nextCategory),
                            sequence: pattern.sequence
                        });
                    }
                }
            });
            
            // Remove duplicates keeping highest match
            const uniquePatterns = {};
            matchedPatterns.forEach(p => {
                if (!uniquePatterns[p.name] || uniquePatterns[p.name].matchPercent < p.matchPercent) {
                    uniquePatterns[p.name] = p;
                }
            });
            
            const sortedPatterns = Object.values(uniquePatterns)
                .sort((a, b) => b.matchPercent - a.matchPercent);
            
            // Calculate number predictions
            const numberScores = {};
            for (let i = 0; i <= 9; i++) {
                numberScores[i] = 0;
            }
            
            sortedPatterns.forEach(pattern => {
                if (pattern.nextNumbers && pattern.nextNumbers.length > 0) {
                    const weight = pattern.matchPercent / 100;
                    pattern.nextNumbers.forEach(num => {
                        numberScores[num] += weight;
                    });
                }
            });
            
            // Calculate total score for percentage
            let totalScore = Object.values(numberScores).reduce((a, b) => a + b, 0);
            if (totalScore === 0) totalScore = 1;
            
            // Display results
            displayPredictions(numberScores, totalScore, sortedPatterns);
        }
        
        function displayPredictions(numberScores, totalScore, matchedPatterns) {
            // Show sections
            document.getElementById('bestPrediction').style.display = 'block';
            document.getElementById('predictionSection').style.display = 'block';
            document.getElementById('categoryPredictions').style.display = 'grid';
            document.getElementById('matchedPatterns').style.display = 'block';
            
            // Number predictions
            const predictionGrid = document.getElementById('predictionGrid');
            predictionGrid.innerHTML = '';
            
            const sortedNumbers = Object.entries(numberScores)
                .sort((a, b) => b[1] - a[1]);
            
            sortedNumbers.forEach(([num, score]) => {
                const percent = ((score / totalScore) * 100).toFixed(1);
                const item = document.createElement('div');
                item.className = 'prediction-item';
                
                let percentClass = 'percent-low';
                if (percent >= 15) percentClass = 'percent-high';
                else if (percent >= 8) percentClass = 'percent-medium';
                
                item.innerHTML = `
                    <div class="prediction-number ball-${num}">${num}</div>
                    <div class="prediction-percent ${percentClass}">${percent}%</div>
                `;
                predictionGrid.appendChild(item);
            });
            
            // Best predictions
            const bestNumbers = document.getElementById('bestNumbers');
            bestNumbers.innerHTML = '';
            
            const top3 = sortedNumbers.slice(0, 3);
            top3.forEach(([num, score], idx) => {
                const percent = ((score / totalScore) * 100).toFixed(1);
                const item = document.createElement('div');
                item.className = 'best-item';
                item.innerHTML = `
                    <div class="best-ball ball-${num}">${num}</div>
                    <div style="color: #22c55e; font-weight: bold;">${percent}%</div>
                    <div style="color: #888; font-size: 12px;">#${idx + 1}</div>
                `;
                bestNumbers.appendChild(item);
            });
            
            // Category predictions
            let bigScore = numberScores[5] + numberScores[6] + numberScores[7] + numberScores[8] + numberScores[9];
            let smallScore = numberScores[0] + numberScores[1] + numberScores[2] + numberScores[3] + numberScores[4];
            let redScore = numberScores[0] + numberScores[2] + numberScores[4] + numberScores[6] + numberScores[8];
            let greenScore = numberScores[1] + numberScores[3] + numberScores[5] + numberScores[7] + numberScores[9];
            
            const sizeTotal = bigScore + smallScore || 1;
            const colorTotal = redScore + greenScore || 1;
            
            document.getElementById('sizePrediction').textContent = bigScore >= smallScore ? 'BIG' : 'SMALL';
            document.getElementById('sizePrediction').style.color = bigScore >= smallScore ? '#22c55e' : '#ef4444';
            document.getElementById('sizePercent').textContent = `${((Math.max(bigScore, smallScore) / sizeTotal) * 100).toFixed(1)}%`;
            
            document.getElementById('colorPrediction').textContent = greenScore >= redScore ? 'GREEN' : 'RED';
            document.getElementById('colorPrediction').style.color = greenScore >= redScore ? '#22c55e' : '#ef4444';
            document.getElementById('colorPercent').textContent = `${((Math.max(greenScore, redScore) / colorTotal) * 100).toFixed(1)}%`;
            
            // Matched patterns list
            const patternsList = document.getElementById('patternsList');
            patternsList.innerHTML = '';
            
            const topPatterns = matchedPatterns.slice(0, 30);
            topPatterns.forEach(pattern => {
                const item = document.createElement('div');
                let patternClass = 'pattern-low';
                if (pattern.matchPercent >= 80) patternClass = 'pattern-high';
                else if (pattern.matchPercent >= 60) patternClass = 'pattern-medium';
                
                item.className = `pattern-item ${patternClass}`;
                
                const nextNumsStr = pattern.nextNumbers && pattern.nextNumbers.length > 0 
                    ? pattern.nextNumbers.join(', ')
                    : 'N/A';
                
                item.innerHTML = `
                    <div class="pattern-name">#${pattern.index}. ${pattern.name}</div>
                    <div class="pattern-match">Match: ${pattern.matchPercent.toFixed(1)}% (${pattern.matchCount}/${pattern.windowSize} positions)</div>
                    <div class="pattern-next">Next Prediction: ${pattern.nextCategory || 'N/A'} ‚Üí Numbers: ${nextNumsStr}</div>
                `;
                patternsList.appendChild(item);
            });
            
            if (topPatterns.length === 0) {
                patternsList.innerHTML = '<div style="text-align: center; color: #888; padding: 20px;">No strong pattern matches found. Add more results.</div>';
            }
        }
        
        function togglePatterns() {
            const grid = document.getElementById('allPatternsGrid');
            grid.classList.toggle('show');
            
            if (grid.classList.contains('show') && grid.innerHTML === '') {
                ALL_PATTERNS.forEach((pattern, idx) => {
                    const item = document.createElement('div');
                    item.className = 'mini-pattern';
                    item.innerHTML = `
                        <div class="mini-pattern-name">#${idx + 1}. ${pattern.name}</div>
                        <div class="mini-pattern-seq">${pattern.sequence.join(', ')}</div>
                    `;
                    grid.appendChild(item);
                });
            }
        }
        
        // Enter key support
        document.getElementById('resultInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                addResult();
            }
        });
        
        // Initial display
        updateDisplay();
    </script>
</body>
</html>
